@using System.ServiceModel.Activities
@model IEnumerable<BeijingYouth.Pub.Models.JSJL.Message>

@{
//Layout = "~/Views/Shared/_Layout.cshtml";
     Layout = "~/Views/Shared/_LoginLayout.cshtml";
    ViewBag.Title = "聊天室";
}
<script type="text/javascript">
    $(function () {
        //滚动条自动置底
        $("#Messages").animate({
            scrollTop: 1000000
        }, 500);
        //    $("#SendBtn").click(function () {
        //        var send = $("#Send").val();
        //        var receive = $("#Receive").val();
        //        var content = $("#Content").val();
        //        $.ajax({
        //            url: "/JSJL/Message/Send",
        //            data: { "Send": send, "Receive": receive, "Content": content },
        //            type: "post",
        //            dataType: "json"
        //        }).done(function(data) {
        //            var result = data.Result;
        //            if (result==="True") {

        //            }
        //        });
        //    });
        //});
    });
</script>
<div class="col-md-3">
    <!-- DIRECT CHAT PRIMARY -->
    <div class="box box-primary direct-chat direct-chat-primary">
        <div class="box-header with-border">
            <div class="box-title">与 李四 的聊天</div>
            <div class="box-tools pull-right">
                <span data-toggle="tooltip" title="3 New Messages" class="badge bg-light-blue">3</span>
                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <button class="btn btn-box-tool" data-toggle="tooltip" title="Contacts" data-widget="chat-pane-toggle"><i class="fa fa-comments"></i></button>
                <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
            </div>
        </div><!-- /.box-header -->
        <div class="box-body">
            <!-- Conversations are loaded here -->
            <div id="Messages" class="direct-chat-messages">
                <!-- Message. Default to the left -->
                @Html.Partial("~/Areas/JSJL/Views/Messages/_messageModel.cshtml", Model)
                
            </div><!-- /.box-body -->
            <div class="box-footer">
                @using (Ajax.BeginForm("Send",new AjaxOptions {HttpMethod = "post"}))
                {
                    @Html.Hidden("Send","张三")
                    @Html.Hidden("Receive","李四")
                    <div class="input-group">
                        @Html.TextBox("Content",null,new {@placeholder="请输入信息……",@class="form-control"})
                        @*<input type="text" name="Content" placeholder="Type Message ..." class="form-control">*@
                        <span class="input-group-btn">
                        <button id="SendBtn" type="submit" class="btn btn-primary btn-flat">发送</button>
                      </span>
                    </div>
                }
            </div><!-- /.box-footer-->
        </div><!--/.direct-chat -->
    </div>
</div>


@*<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Send)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Receive)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Message)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SendDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Send)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Receive)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Message)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SendDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Type)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table>*@
